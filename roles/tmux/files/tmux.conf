# Italics & Truecolor support
set -g default-terminal "xterm-256color-italic"
set-option -ga terminal-overrides ",xterm-256color-italic:Tc"

# Change prefix. 
set -g prefix c-a

# Ctrl-a Ctrl-a switches panes
bind C-a last-pane
bind a last-pane

# switch panes using Alt-arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Rebind the session key to allow switching windows quickly
bind C-s last-window
bind s last-window
# Let Ctrl-space do the same thing
bind Space last-window
bind C-Space last-window

# Enable mouse mode (tmux 2.1 and above)
set -g mouse on

# Same rename hotkey as screen
bind A command-prompt "rename-window '%%'"

# reload tmux.conf
bind r source-file ~/.tmux.conf \; display-message " ‚ú± ~/.tmux.conf is reloaded"

# don't rename windows automatically
set-option -g allow-rename off


# don't constrain the screen size based on clients connected to this session, rather
# constrain it based on clients connected to each specific window.
setw -g aggressive-resize on

set-option -g repeat-time 0

# Removes ESC delay
set -sg escape-time 0


###############################################################################
# Statusbar                                                                   #
###############################################################################
set-option -g status-position top

gb_red=colour124
gb_brightred=colour167
gb_blue=colour66
gb_brightblue=colour109
gb_yellow=colour172
gb_brightyellow=colour214
gb_orange=colour166
gb_brightorange=colour208
gb_green=colour106
gb_brightgreen=colour142
gb_purple=colour132
gb_brightpurple=colour175
gb_aqua=colour72
gb_brightaqua=colour108
gb_white=colour223
gb_brightwhite=colour229

gb_bg=colour235
gb_bg0=colour235
gb_bg1=colour237

tm_color_active=colour213
tm_color_inactive=colour241
tm_color_feature=colour110

# separators
tm_separator_left_bold="‚óÄ"
tm_separator_left_thin="‚ùÆ"
tm_separator_right_bold="‚ñ∂"
tm_separator_right_thin="‚ùØ"
tm_separator_right_double="¬ª"

set -g status-left-length 32
set -g status-right-length 150
set -g status-interval 5

# default statusbar colors
# set-option -g status-bg colour0
set-option -g status-fg default 
set-option -g status-bg $gb_blue 
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg $gb_brightwhite
set-window-option -g window-status-bg $gb_brightblue
set -g window-status-format " #I ÓÇ± #W "

# active window title colors
set-window-option -g window-status-current-fg $gb_brightwhite 
set-window-option -g window-status-current-bg $gb_yellow
set-window-option -g window-status-current-format " #I ÓÇ± #W "

# pane border
set-option -g pane-border-fg $tm_color_inactive
set-option -g pane-active-border-fg $tm_color_active

# message text
set-option -g message-bg red
set-option -g message-fg brightwhite

# pane number display
set-option -g display-panes-active-colour $tm_color_active
set-option -g display-panes-colour $tm_color_inactive

# clock
set-window-option -g clock-mode-colour $tm_color_active

tm_music="#[bg=$gb_brightblue fg=$gb_brightwhite] #(~/dotfiles/roles/tmux/files/music.sh) "
tm_weather="#[bg=$gb_yellow fg=$gb_brightwhite]#(~/dotfiles/roles/tmux/files/weather.sh) "
tm_battery="#(~/dotfiles/roles/tmux/files/battery_indicator.sh)"
tm_date="#[bg=$gb_orange] %A %e %B %R"
tm_utc="#[fg=$gb_brightwhite](#(~/dotfiles/roles/tmux/files/time.sh) UTC) #[]"
tm_host="#[fg=$gb_brightwhite]#h"
tm_session="#[fg=$gb_brightwhite] ü¶Ü #[] #S #[]"

set -g status-left $tm_session' #[]'
set -g status-right $tm_music$tm_weather$tm_date' '$tm_utc


###############################################################################
# TPM                                                                         #
###############################################################################

# List of plugins
set -g @tpm_plugins '                \
    tmux-plugins/tpm                 \
    tmux-plugins/tmux-sensible       \
    tmux-plugins/tmux-resurrect      \
    tmux-plugins/tmux-continuum      \
    tmux-plugins/tmux-yank           \
    tmux-plugins/tmux-pain-control   \
    tmux-plugins/tmux-copycat        \
    tmux-plugins/tmux-open           \
    tmux-plugins/tmux-battery        \
    tmux-plugins/tmux-cpu            \
'

# Initialize TMUX plugin manager

run '~/.tmux/plugins/tpm/tpm'
